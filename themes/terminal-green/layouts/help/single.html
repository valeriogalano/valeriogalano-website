{{ define "main" }}
<section class="tg-help">
  <div class="tg-buffer">
    <h1>Help</h1>
    {{/* Gather routes from site params; provide sane defaults if empty */}}
    {{ $routes := .Site.Params.routes }}
    {{ if not $routes }}
      {{ $routes = slice
        (dict "cmd" ":home"     "path" "/"         "desc" "Homepage" "showInHelp" true)
        (dict "cmd" ":help"     "path" "/help"     "desc" "Show this list" "showInHelp" true)
        (dict "cmd" ":q"        "path" "/"         "desc" "Quit (return to homepage)" "showInHelp" true)
      }}
    {{ end }}

    {{/* Render page-specific help content written in content/help.md */}}
    <div class="tg-help-body">
      {{ .Content }}
    </div>

    <p>Available commands</p>
    <ul class="tg-cmd-list">
      {{ range $routes }}
        {{/* Default behavior: if showInHelp missing, treat as true */}}
        {{ $has := isset . "showInHelp" }}
        {{ $show := cond $has (index . "showInHelp") true }}
        {{ if not $show }}{{ continue }}{{ end }}
        <li class="tg-cmd-item">
          <code class="tg-cmd-token">{{ .cmd }}</code>
          <span class="tg-cmd-sep">-</span>
          <span class="tg-cmd-desc">{{ .desc }}</span>
        </li>
      {{ end }}
    </ul>
  </div>
</section>
{{ end }}
