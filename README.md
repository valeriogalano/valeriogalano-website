# valeriogalano-website

![Build Status](https://github.com/valeriogalano/valeriogalano.it/actions/workflows/hugo.yml/badge.svg)

A personal site built with Hugo and a custom theme named `vim-style`. The theme renders a minimal, Vim‑like UI with keyboard navigation (`j`/`k`/`Enter`) and a `:` command line. Routes/commands are configured once in `config.toml` and exposed to the frontend through a small JSON bridge.

## Overview

- Static site generator: Hugo (Extended) 0.152+ recommended.
- Custom theme: `themes/vim-style`.
- Assets are processed with Hugo Pipes (minify + fingerprint) and linked with `integrity` attributes.
- Command routes are defined in `config.toml` under `[[params.routes]]` and automatically wired to:
  - The top navigation (where layouts include it)
  - The Help page (`/help`) when `showInHelp = true`
  - The `:` command line at runtime

## Prerequisites

- For live development or production builds: Hugo Extended 0.152+.
- For smoke tests without building: an existing `public/` directory is required. If `public/` is not present (default in this repo), install Hugo and use the `--build` option in the smoke script.

## Local development (live)

Start a live server with drafts enabled:

```
hugo server -D
```

Then open `http://localhost:1313`.

## Production build

Generate a minified production build into `public/`:

```
hugo --minify
```

## Smoke tests

Run static checks against an existing `public/` output (no Hugo needed if `public/` already exists):

```
bash scripts/smoke_public.sh
```

If `public/` is not present, build first (requires Hugo), then run the same checks:

```
bash scripts/smoke_public.sh --build
```

The script exits non‑zero on failure and validates that critical pages exist, fingerprinted assets are linked and present, the hidden routes bridge is rendered, and the footer version is visible.

## Configuration highlights

- `config.toml`
  - `params.version` controls the version shown in the footer (class `.vim-ver`).
  - `[[params.routes]]` is the single source of truth for all Vim‑style commands. Do not hardcode command lists in JS.

## Theme internals (where things live)

- Route bridge: `themes/vim-style/layouts/partials/route_data.html` emits a hidden div `#vs-routes` with a `data-json` map consumed by JS.
- Frontend behavior:
  - `themes/vim-style/assets/js/command-nav.js` manages the `:` command and routing.
  - `themes/vim-style/assets/js/link-nav.js` handles `j`/`k` navigation, `Enter`, footer position, and mobile keys.
- Layout wiring and asset pipeline: `themes/vim-style/layouts/_default/baseof.html` uses Hugo Pipes to minify + fingerprint CSS/JS and adds `integrity` attributes.

## Content

- Markdown lives under `content/` with minimal frontmatter (`title`, `url`, `aliases`, `draft`, optional `navLabel`).
- Use the archetype `archetypes/default.md` for new content types.

## Versioning and changelog

When you make user‑visible changes to the Vim‑style UI (commands, navigation, accessibility, mobile keys):

1. Bump `params.version` in `config.toml`.
2. Prepend a new section to `content/_changelog.md` with a header like `### vX.Y.Z` and short bullets of the changes.
3. Build and run smoke tests.
4. Commit both files together. Suggested message: `chore(release): vX.Y.Z`.

## Quick troubleshooting

- Commands not working with `:`
  - Ensure `#vs-routes` is present in the rendered HTML and includes your command in its `data-json`. If not, check `config.toml` and rebuild.
- 404s for CSS/JS after edits
  - Make sure assets go through Hugo Pipes; do not reference non‑fingerprinted filenames from templates.
- Help page missing commands
  - Verify `showInHelp = true` on the route in `config.toml`.

## Project structure (selected)

- `content/` — site content (Markdown)
- `themes/vim-style/` — theme assets and layouts
- `public/` — built output (generated by `hugo`; not committed by default)
- `scripts/smoke_public.sh` — permanent smoke checks

## License

Not specified. If you intend to publish this code under a specific license, add a `LICENSE` file at the repository root.
